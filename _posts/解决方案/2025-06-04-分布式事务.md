---
layout: post
title:  "分布式事务详解"
date:   2025-06-04 09:31:26 +0800
categories: [解决方案]
---
## 1. 分布式事务出现的场景

- 一个应用多数据源
- 多个应用一个数据数据源（远程调用）
- 多个应用多个数据源 

## 2. 分布式事务的问题

```
本地事务满足ACID(原子性、一致性、隔离性和持久性)，其中持久性是强一致性。对于分布式事务来说，资源管理器和事务管理器不相同，导致无法保证一致性。
```

## 3. 分布式事务的理论基础

3.1 CAP理论

```
在分布式系统中强一致性（C）、高可用性（A）和分区容错性（P）三者无法同时满足。
- 分区容错性是指当网络发生分区（节点间无法及时通信）时，系统仍然可以正常运行，由于网络状况不可控制，
分区容错性是一定要保证的，当分区发生时需要在CA之间做出选择。
- 强一致性：同一时刻各个节点的数据相同
- 高可用性：当部分节点发生故障时，系统仍然可以响应请求

```
3.2 BASE理论

```
基本可用（BA）、软状态（中间状态）（S）、最终一致性（E）

- BA:当分布式系统出现故障时允许损失部分可用，但是保证核心可用。
- S:指系统允许存在一定时间的中间状态，副本间的同步可以不实时
- E:指系统经过一段时间后最终各个节点间保持一致
```